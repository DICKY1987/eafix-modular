---
doc_id: DOC-GUIDE-2026-0118-002
title: Identity System Quick Start Guide
date: 2026-01-18
audience: Developers, Operations
---

# Identity System Quick Start Guide

## Overview

The Enhanced File Scanner v2.py now integrates with IDENTITY_CONFIG.yaml to automatically derive type codes and namespace codes for files based on configured rules.

## Quick Start

### Basic Usage

```bash
# Scan current directory with identity config
python "Enhanced File Scanner v2.py" --identity-config IDENTITY_CONFIG.yaml -f csv .

# Scan specific directory
python "Enhanced File Scanner v2.py" --identity-config IDENTITY_CONFIG.yaml -f csv C:\my\project
```

### Output

Scanner generates CSV with 26 columns including:
- **type_code**: 2-digit file type (e.g., 20=Python, 01=Markdown)
- **ns_code**: 3-digit namespace (e.g., 100=docs, 110=data, 999=fallback)
- **scope**: 6-digit collision domain (260118 for this project)
- **has_id_prefix**: Boolean, true if file already has 16-digit ID prefix
- **needs_id**: Boolean, true if file needs ID assignment

## Configuration

### IDENTITY_CONFIG.yaml Structure

```yaml
scope: "260118"  # 6-digit project identifier

type_classification:
  table:
    - { match: ".py",   type_code: "20" }  # Python
    - { match: ".md",   type_code: "01" }  # Markdown
    - { match: ".json", type_code: "11" }  # JSON
    - { match: "*",     type_code: "00" }  # Fallback

namespace_routing:
  rules:
    - { path_glob: "docs/**/*",   ns_code: "100" }  # Documentation
    - { path_glob: "data/**/*",   ns_code: "110" }  # Data files
    - { path_glob: "scripts/**/*", ns_code: "200" }  # Scripts
    - { path_glob: "**/*",        ns_code: "999" }  # Fallback
```

### Adding New File Types

1. Edit `IDENTITY_CONFIG.yaml`
2. Add entry to `type_classification.table`:
   ```yaml
   - { match: ".rs", type_code: "23" }  # Rust
   ```
3. Run scanner - new type code will be applied

### Adding New Namespaces

1. Edit `IDENTITY_CONFIG.yaml`
2. Add entry to `namespace_routing.rules`:
   ```yaml
   - { path_glob: "tests/**/*", ns_code: "800" }  # Tests
   ```
3. Run scanner - new namespace will be applied

## Understanding the Output

### Sample CSV Row

```csv
scan_id,scan_root,first_seen_utc,relative_path,path,name,extension,size_bytes,mtime_utc,created_time,is_directory,mime_type,permissions,content_hash,doc_id,has_id_prefix,current_id_prefix,needs_id,0000000000000000_filename,type_code,ns_code,scope,planned_id,planned_rel_path,error,error_kind
20260118_150222_a1b2c3d4e5f6,C:\project,2026-01-18T15:02:22Z,src\main.py,C:\project\src\main.py,main.py,py,1024,2026-01-18T14:00:00Z,2026-01-18T13:00:00Z,False,text/x-python,644,,,,True,0000000000000000_main.py,20,200,260118,,,,
```

### Key Fields

- **doc_id**: Existing 16-digit ID (if present)
- **has_id_prefix**: False = needs new ID
- **type_code**: 20 = Python file
- **ns_code**: 200 = scripts namespace
- **scope**: 260118 = this project
- **0000000000000000_filename**: Placeholder name for files needing IDs

## Validation

### Check Column Count

```powershell
# Should output: 26
(Get-Content scan_output\file_scan_*.csv -Head 1 -split ',').Count
```

### Check Type Code Derivation

```powershell
Import-Csv scan_output\file_scan_*.csv | 
  Where-Object { $_.extension -eq 'py' } | 
  Select-Object -First 1 name, type_code
```

Expected: `type_code = 20`

### Check Namespace Routing

```powershell
Import-Csv scan_output\file_scan_*.csv | 
  Where-Object { $_.relative_path -like 'docs/*' } | 
  Select-Object -First 1 relative_path, ns_code
```

Expected: `ns_code = 100`

## Troubleshooting

### "PyYAML not installed"

```bash
pip install pyyaml
```

### "Identity config error"

Check YAML syntax:
```bash
python -c "import yaml; yaml.safe_load(open('IDENTITY_CONFIG.yaml'))"
```

### Wrong type_code or ns_code

1. Check file extension matches config exactly (case-insensitive)
2. Check path glob pattern uses forward slashes `/`
3. Rules are evaluated top-to-bottom, first match wins
4. Fallback rules (match: "*" or path_glob: "**/*") should be LAST

### Config not loading

1. Check file path: `--identity-config IDENTITY_CONFIG.yaml`
2. Check file exists in specified location
3. Check file permissions (must be readable)
4. Scanner will log: "Loaded identity config: scope=260118"

## Advanced Usage

### Custom Config Path

```bash
python "Enhanced File Scanner v2.py" \
  --identity-config /path/to/custom_config.yaml \
  -f csv .
```

### Multiple Scans

Each scan generates unique `scan_id` for traceability:
```
scan_id: 20260118_150222_a1b2c3d4e5f6
         ^^^^^^^^ ^^^^^^ ^^^^^^^^^^^^
         date     time   unique_suffix
```

### Filtering

```bash
# Only scan files â‰¤ 10MB
python "Enhanced File Scanner v2.py" \
  --identity-config IDENTITY_CONFIG.yaml \
  --max-size 10485760 \
  -f csv .
```

## Next Steps

After scanning:
1. **Review CSV output** - verify type_code and ns_code assignments
2. **Adjust config** - add/modify rules as needed
3. **Re-scan** - generate updated CSV
4. **Phase 2** - Use CSV as input for ID allocation and file renaming

## Reference

### Type Code Registry (Current)

| Code | Type | Extensions |
|------|------|------------|
| 00 | Unknown/Directory | * |
| 01 | Markdown | .md |
| 02 | Text | .txt |
| 10 | CSV | .csv |
| 11 | JSON | .json |
| 12 | YAML | .yaml, .yml |
| 13 | JSONL | .jsonl |
| 20 | Python | .py |
| 21 | PowerShell | .ps1 |
| 22 | MQL4 | .mq4 |
| 30 | Database | .db |
| 40 | XML | .xml |
| 41 | Image | .png |
| 42 | Log | .log |
| 43 | HTML | .html |
| 50 | Executable | .exe |
| 51 | Library | .dll |

### Namespace Code Registry (Current)

| Code | Namespace | Path Pattern |
|------|-----------|--------------|
| 100 | Documentation | docs/**/* |
| 110 | Data | data/**/* |
| 200 | Python Scripts | scripts/python/**/* |
| 201 | PowerShell Scripts | scripts/powershell/**/* |
| 202 | MQ4 Scripts | scripts/mq4/**/* |
| 300 | Storage | storage/**/* |
| 400 | Assets | assets/**/* |
| 410 | Logs | logs/**/* |
| 420 | Reports | reports/**/* |
| 500 | Binaries | bin/**/* |
| 999 | Uncategorized | **/* (fallback) |

## Support

- **Implementation Report**: See `2026011820600001_IMPLEMENTATION_REPORT.md`
- **Specification**: See `FILE_SCAN_CSV_DERIVATION_SPEC.txt`
- **Configuration**: See `IDENTITY_CONFIG.yaml` comments

---

**Document ID:** DOC-GUIDE-2026-0118-002  
**Last Updated:** 2026-01-18  
**Version:** 1.0
